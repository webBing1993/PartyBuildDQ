<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no" />
    <title>店铺地图</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Microsoft YaHei';
            -webkit-tap-highlight-color:rgba(0,0,0,0);
            text-decoration: none;
        }
        body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, form, input, p, table, th, td, select, option {
            padding: 0;
            margin: 0;
            list-style: none;
        }
        #mapContainer{
            width:100%;
        }
    </style>
</head>
<body>
<div id="mapContainer"></div>
<script src="/work/js/jquery-1.12.1.min.js"></script>
<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=2781899cbba5f31411b2439cc65cf39a"></script>
<div id="tip"></div>
<script type="text/javascript">
    var a={$shop.position_x};//经纬度
    var b={$shop.position_y};//经纬度
    var infoWindow;
    var map = new AMap.Map("mapContainer", {
        resizeEnable: true,
        center: [a,b],
        zoom: 13
    });
    var marker = new AMap.Marker({
        position: map.getCenter()
    });
    marker.setMap(map);
    marker.on('click',function(){
        openInfo()
    });
    //在指定位置打开信息窗体
    function openInfo() {
        //构建信息窗体中显示的内容
        var info = [];
        info.push("<div style=\"padding:0px 0px 0px 4px;\"><b>{$shop.title}</b>");
        info.push("店铺电话：{$shop.tel}");
        info.push("店铺地址：{$shop.address}");
        info.push("店铺主营：{$shop.content}</div>");
        infoWindow = new AMap.InfoWindow({
            content: info.join("<br/>"),  //使用默认信息窗体框样式，显示信息内容
            offset: new AMap.Pixel(0, -30)
        });
        infoWindow.open(map, [a,b]);
    }
    setTimeout(function(){
        openInfo();
    },500);

    $(function(){
        $('#mapContainer').height($(window).height());
    })
</script>
</body>
</html>